# YOLO_8Cell 血细胞检测与分类项目

## 项目概述

YOLO_8Cell是一个基于YOLO（You Only Look Once）系列模型的血细胞检测与分类项目。该项目旨在自动识别和定位显微镜下的不同类型血细胞，采用人机结合的方式提高标注效率。

## 检测类别

### 血细胞类型

1. **嗜碱性粒细胞 (basophil)**
2. **嗜酸性粒细胞 (eosinophil)**
3. **中性粒细胞 (neutrophil)**
   - BNE - 杆状核中性粒细胞
   - SNE - 分叶核中性粒细胞
4. **淋巴细胞 (lymphocyte)**
5. **单核细胞 (monocyte)**
6. **核红细胞 (erythroblast)**
7. **血小板 (platelet)**
8. **未成熟粒细胞 (ig)**
   - MY (髓系原始细胞)
   - PMY (早幼粒细胞)
   - MMY (中幼粒细胞)
   - *注：这些均属于白细胞范畴*
   - *注：这些均属于白细胞范畴*

### 分类说明

- 前5项为经典的白细胞五大类型
- 未成熟粒细胞(ig)包含多个亚型
- IG命名图片说明：通常指免疫固定电泳图，用于可视化展示和鉴定由恶性浆细胞产生的单克隆免疫球蛋白
  - 单克隆条带：证实体内存在MMY
  - 多克隆模式：说明浆细胞处于正常PMY状态或仅为反应性增生

## 工作流程

项目采用人机结合的标注策略，具体工作流程如下：

### 目标检测工作流程

1. **人工标注**：
   - 对每种细胞类型选择代表性样本进行高质量人工标注
   - 标注数据存储在small_datasets对应类别目录中
   - 重点确保标注的准确性和一致性

2. **小模型训练**：
   - 使用人工标注的小数据集分别训练8个初始模型
   - 每个细胞类型独立训练专属的小模型
   - 训练结果保存在small_models目录下对应类别子目录

3. **机器辅助标注**：
   - 使用训练好的小模型对full_datasets中的大量未标注图片进行自动标注
   - 通过脚本实现批量标注处理
   - 生成初步的标签文件

4. **人工确认标注**：
   - 对机器自动标注的结果进行抽样检查
   - 修正错误标注和边界框不准确的情况
   - 确保标注质量达到项目要求

5. **合成大模型**：
   - 收集所有经过验证的标注数据（人工+机器）
   - 使用完整数据集训练最终的综合模型
   - 模型保存至full_models目录

### 多模型策略

- 为每种细胞类型单独训练小模型（共8个）
- 各类别模型分别用于标注对应类型的数据集
- 标注后的数据集将整合用于训练最终的综合模型
- 综合模型能够同时识别和定位所有8种血细胞类型

## 项目结构

```
YOLO_8Cell/
├── full_datasets/           # 完整数据集目录
│   ├── basophil/            # 嗜碱性粒细胞数据集
│   ├── eosinophil/          # 嗜酸性粒细胞数据集
│   ├── erythroblast/        # 幼红细胞数据集
│   ├── ig/                  # 中幼粒细胞数据集
│   ├── lymphocyte/          # 淋巴细胞数据集
│   ├── monocyte/            # 单核细胞数据集
│   ├── neutrophil/          # 中性粒细胞数据集
│   └── platelet/            # 血小板数据集
├── full_models/             # 大模型保存目录
├── small_datasets/          # 小数据集目录
│   ├── basophil/            # 嗜碱性粒细胞小数据集
│   ├── eosinophil/          # 嗜酸性粒细胞小数据集
│   └── ...                  # 其他细胞类型小数据集
├── small_models/            # 小模型训练目录
│   ├── basophil_train/      # 嗜碱性粒细胞训练相关文件
│   ├── eosinophil_train/    # 嗜酸性粒细胞训练相关文件
│   └── ...                  # 其他细胞类型训练目录
```

## 数据集说明

- 图片库按照细胞类型完全分开存储
- 每个类别数据集包含images和labels两个子目录
- 小数据集用于初始模型训练
- 完全标注后的数据将存储在full_datasets目录下

## 使用方法

### 1. 训练小模型

```bash
# 以嗜酸性粒细胞为例
python small_models/eosinophil_train/eosinophil_train.py
```

### 2. 自动标注

```bash
# 以嗜酸性粒细胞为例
python small_models/eosinophil_train/eosinophil_label.py
```

## 注意事项

1. 小模型训练完成后，权重文件保存在对应训练目录的weights/best.pt中
2. 自动标注时，需确保源图片路径正确配置
3. 机器标注后建议抽样检查标签质量，必要时进行人工修正
4. 不同类型细胞可能需要调整置信度阈值以获得最佳标注效果


#使用pyside6 做页面展示
1. 可以支持多种pt  支持分类和目标检测
可以控制目标检测窗口的
